
#
# OpenWrt 编译配置文件 - 适用于阿里云 AP8220 (IPQ807x)
# 平台与目标设备
#
CONFIG_TARGET_ipq807x=y
CONFIG_TARGET_ipq807x_generic=y
CONFIG_TARGET_ipq807x_generic_DEVICE_aliyun_ap8220=y

#
# 基础系统与 LuCI 网络管理界面
#
CONFIG_PACKAGE_luci=y                          # 启用 LuCI Web 管理界面
CONFIG_PACKAGE_luci-theme-material=y           # 使用 Material 主题（美观现代）
CONFIG_PACKAGE_luci-app-firewall=y             # 防火墙图形配置模块

#
# NSS 硬件加速支持（关键！）
#
CONFIG_PACKAGE_kmod-qca-nss-dp=y               # NSS 数据平面驱动（必须）
CONFIG_PACKAGE_kmod-qca-nss-ecm-standard=y     # ECM 标准加速模块（用于 NAT/路由加速）
CONFIG_PACKAGE_kmod-qca-nss-gmac=y             # GMAC 驱动（千兆/2.5G 网口硬件卸载）
CONFIG_PACKAGE_kmod-qca-nss-cfi-crypto=y       # NSS 加密加速（可选，提升 IPsec 性能）
CONFIG_PACKAGE_nss-userspace=y                 # 用户态 NSS 工具（调试/状态查看）
CONFIG_PACKAGE_luci-app-turboacc=y             # Turbo ACC 图形界面（一键启用 NSS/Shortcut-FE）
CONFIG_PACKAGE_kmod-shortcut-fe=y              # Shortcut-FE 软件流加速（与 NSS 互补）
CONFIG_PACKAGE_kmod-shortcut-fe-drv=y          # Shortcut-FE 驱动模块

#
# 无线驱动（QCA9984 + CT 固件）
#
CONFIG_PACKAGE_kmod-ath10k-ct=y                # CT 版 ath10k 驱动（更稳定低延迟）
CONFIG_PACKAGE_ath10k-firmware-qca9984-ct=y    # QCA9984 对应的 CT 固件
CONFIG_PACKAGE_wpad-openssl=y                  # 支持 WPA3 的无线认证服务

#
# 网络功能与实用插件
#
CONFIG_PACKAGE_luci-app-ddns=y                 # 动态 DNS 图形化配置
CONFIG_PACKAGE_ddns-scripts=y                  # DDNS 核心脚本
CONFIG_PACKAGE_ddns-scripts_services=y         # 额外 DDNS 服务商支持（如阿里云、Cloudflare）
CONFIG_PACKAGE_luci-app-sqm=y                  # SQM 智能队列管理（解决 Bufferbloat）
CONFIG_PACKAGE_sqm-scripts=y                   # SQM 脚本支持
CONFIG_PACKAGE_luci-app-mwan3=y                # 多 WAN 负载均衡（利用双 2.5G 网口）
CONFIG_PACKAGE_luci-app-mwan3helper=y          # MWAN3 辅助配置工具
CONFIG_PACKAGE_luci-app-commands=y             # 自定义命令执行
CONFIG_PACKAGE_luci-app-attendedsysupgrade=y   # 在线固件升级助手

#
# DNS 与广告过滤
#
CONFIG_PACKAGE_dnsmasq-full=y                  # 完整版 dnsmasq（支持 adblock 所需功能）
CONFIG_PACKAGE_luci-app-adblock=y              # 广告过滤插件
CONFIG_PACKAGE_dnsmasq=n                       # 禁用基础版 dnsmasq，避免冲突

#
# 网络诊断工具
#
CONFIG_PACKAGE_tcpdump=y                       # 抓包工具
CONFIG_PACKAGE_mtr=y                           # 网络路径诊断
CONFIG_PACKAGE_iperf3=y                        # 网络带宽测试

#
# USB 与存储扩展（便于挂载 U 盘/SSD）
#
CONFIG_KERNEL_SWAP=y                           # 启用 swap 支持
CONFIG_PACKAGE_kmod-usb3=y                     # USB 3.0 驱动
CONFIG_PACKAGE_kmod-usb-storage=y              # USB 存储设备支持
CONFIG_PACKAGE_block-mount=y                   # 自动挂载块设备（如 U 盘、SSD）

#
# VPN 支持（WireGuard + OpenVPN）
#
CONFIG_PACKAGE_kmod-wireguard=y                # WireGuard 内核模块
CONFIG_PACKAGE_wireguard-tools=y               # WireGuard 工具集
CONFIG_PACKAGE_luci-proto-wireguard=y          # WireGuard 协议支持
CONFIG_PACKAGE_luci-app-wireguard=y            # WireGuard 图形化管理界面
CONFIG_PACKAGE_openvpn=y                       # OpenVPN 客户端/服务端
CONFIG_PACKAGE_luci-app-openvpn=y              # OpenVPN 图形化配置
CONFIG_PACKAGE_openvpn-easy-rsa=y              # OpenVPN 证书管理工具

#
# Docker 容器支持
#
CONFIG_PACKAGE_dockerd=y                       # Docker 守护进程
CONFIG_PACKAGE_docker-cli=y                    # Docker 命令行工具
CONFIG_PACKAGE_luci-app-docker=y               # Docker 图形化管理界面
CONFIG_PACKAGE_cgroupfs-mount=y                # Cgroup 文件系统支持（容器资源控制）
CONFIG_PACKAGE_liblxc=y                        # LXC 容器库
CONFIG_PACKAGE_apparmor=y                      # AppArmor 安全模块（可选）

#
# 远程管理工具
#
CONFIG_PACKAGE_luci-app-ttyd=y                 # Web 终端远程管理（命令行访问）
CONFIG_PACKAGE_luci-app-rpcd-mod-https=y       # 安全远程 API 访问（HTTPS 支持）

#
# 内核特性（通常自动启用）
#
CONFIG_KERNEL_NET_FLOW_LIMIT=y                 # 启用网络流控支持（NSS 依赖）
CONFIG_KERNEL_NETFILTER_XT_MATCH_PHYSDEV=y     # 支持物理设备匹配（用于复杂防火墙规则）

#
# 禁用不必要组件（节省空间）
#
CONFIG_PACKAGE_odhcpd-ipv6only=n               # 禁用仅 IPv6 的 DHCP 服务
CONFIG_PACKAGE_ppp=n                           # 禁用 PPP 拨号（AP8220 通常直连光猫）
CONFIG_PACKAGE_firewall4=y                     # 使用 nftables 防火墙（23.05+ 默认）
CONFIG_PACKAGE_fail2ban=n
CONFIG_PACKAGE_flent=n
CONFIG_PACKAGE_python-babel=n
CONFIG_PACKAGE_python-docker=n
CONFIG_PACKAGE_python-incremental=n
